import { CaseStudyViewer } from '@/components/CaseStudyViewer'
import { getCaseStudyBySlug } from '@/lib/caseStudies'
import { Figure } from '@/components/mdx/CaseStudyComponents'
import { Lens } from '@/components/ui/lens'
import Image from 'next/image'
import { GoalBlock } from '@/components/case-studies/GoalBlock'
import { QuoteBlock } from '@/components/case-studies/QuoteBlock'
import { SplitSection, OrbitContainer } from '@/components/case-studies/SplitSection'
import { ImageGallery } from '@/components/ui/image-gallery'
import { FocusImageGallery } from '@/components/ui/focus-image-gallery'
import { Heading } from '@/components/Heading'
import { OrbitingCircles } from '@/components/ui/orbiting-circles'
import { Tree, Folder, File } from '@/components/ui/file-tree'
import { Timeline } from '@/components/ui/newacetimeline'
import { Tooltip } from '@/components/ui/tooltip-card'
import { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion'
import { GitBranch, GitCompare, Network, GraduationCap, FileText, Layers, MessageSquare } from 'lucide-react'
import { LearningCard } from '@/components/case-studies/LearningCard'
import { HalfContentSection } from '@/components/ui/halfcontentsection'

export const metadata = {
  title: 'Cornell University: SC Johnson College of Business - Case Study',
  description: 'Unifying three distinct institutions through a cohesive digital experience',
}

export const sections = [
  { title: 'Context', id: 'context' },
  { title: 'The Problem', id: 'the-mess' },
  { title: 'How I Created Clarity', id: 'how-i-created-clarity' },
  { title: 'Practical AI', id: 'where-ai-helped' },
  { title: 'Outcomes & Artefacts', id: 'outcomes' },
  { title: 'Learnings', id: 'learnings' },
]

export default function CornellUniversityCaseStudy() {
  const caseStudy = getCaseStudyBySlug('cornell-university')

  if (!caseStudy) {
    return <div>Case study not found</div>
  }

  // Results metrics - directional
  const metrics = [
    {
      label: 'Findability Improvement',
      value: 92,
      suffix: '%',
      description: 'Users successfully found program info in under 2 minutes',
      highlight: true,
    },
    {
      label: 'Modules & Screens Wireframed',
      value: 55,
      description: 'System-first approach to reduce one-off decisions',
      highlight: true,
    },
    {
      label: 'Personas Defined',
      value: 3,
      description: 'Core personas to anchor decisions across stakeholders',
      highlight: true,
    },
  ]

  const approachTimeline = [
    {
      title: 'Insight work',
      content: (
        <div className="prose prose-zinc dark:prose-invert max-w-none">
          <h3 className="mt-0">Data-Informed, Human-Interpreted</h3>
          <p>We triangulated quantitative signals (<Tooltip content="Behavior analytics for seeing how people actually navigate via heatmaps, scroll depth, and session replays."><span className="font-bold">Hotjar</span></Tooltip> + <Tooltip content="Google Analytics—traffic and event data that shows what’s happening at scale."><span className="font-bold">GA</span></Tooltip>) with qualitative observation to locate friction and validate what the data couldn’t explain on its own.</p>
          <p>The output wasn’t a giant research deck. It was a practical map:</p>
          <ul>
            <li>the journeys that matter most (especially prospective students)</li>
            <li>the pages and modules that were creating drop-offs</li>
            <li>a clear “problem → hypothesis → design probe → success signal” trail</li>
          </ul>
          <Accordion type="single" collapsible className="mt-4">
            <AccordionItem value="nerdy-aside">
              <AccordionTrigger className="font-bold hover:text-emerald-600 dark:hover:text-emerald-400 text-base">
                Nerdy aside: how we used data without drowning in it
              </AccordionTrigger>
              <AccordionContent>
                <div className="p-4 mt-2 bg-zinc-50 dark:bg-zinc-800/50 rounded-lg">
                  <p>
                    We used data the same way you use a map: not to admire it, but to decide where to walk next.
                    GA + Hotjar gave us the broad signal—what pages mattered, where people dropped, what they were trying to do when they bailed.
                    Then we switched to the "metal detector" phase: session replays and journey walk-throughs to see the friction the numbers can't explain.
                  </p>
                  <p>
                    The point wasn't to drown in dashboards. It was to reduce guesswork and get to decisions faster.
                    Our loop stayed intentionally simple:
                  </p>
                  <ul>
                    <li><strong>Signal:</strong> Find the moments that break momentum (drop-offs, dead-ends, rage clicks, confused scrolling).</li>
                    <li><strong>Diagnosis:</strong> Watch what users actually do, then translate it into plain-language problems.</li>
                    <li><strong>Action:</strong> Turn each problem into a clear trail: <em>problem → hypothesis → design probe → success signal</em>.</li>
                  </ul>
                  <p>
                    That's why the output wasn't a giant research deck. It was a practical shortlist of "fix this next" items—
                    tied to specific journeys (especially prospective students) and backed by evidence we could point to in a meeting without theatrics.
                  </p>
                  <div className="my-6">
                    <Lens zoomFactor={1.5} lensSize={200}>
                      <Image
                        src="/images/case-studies/cornell-university/nerdycornelldata.jpg"
                        alt="Annotated Hotjar data"
                        width={1200}
                        height={800}
                        className="w-full h-auto rounded-lg"
                      />
                    </Lens>
                    <p className="text-sm text-zinc-600 dark:text-zinc-400 text-center mt-3">
                      Pinpointing the right problems made the design work calmer and faster
                    </p>
                  </div>
                </div>
              </AccordionContent>
            </AccordionItem>
          </Accordion>
        </div>
      ),
    },
    {
      title: 'Personas',
      content: (
        <div className="prose prose-zinc dark:prose-invert max-w-none">
          <h3 className="mt-0">Anchor decisions with personas + user stories</h3>
          <p>We defined and validated three core <Tooltip content="Research-backed archetypes that represent key user types, used to keep decisions anchored to real needs instead of opinions."><span className="font-bold">personas</span></Tooltip> to keep decisions grounded, especially when stakeholder opinions diverged (which they will, because they’re stakeholders).</p>
          <p>The key benefit was speed with integrity: when the persona is clear, decisions stop being philosophical.</p>
          <div className="my-4">
            <FocusImageGallery
              images={[
                {
                  src: "/images/case-studies/cornell-university/persona-slide1.avif",
                  alt: "Prospective student persona and user stories",
                  caption: "Prospective student 1"
                },
                {
                  src: "/images/personas/Persona-2.png",
                  alt: "Current student persona",
                  caption: "Prospective student 2"
                },
                {
                  src: "/images/personas/Persona-3.png",
                  alt: "Faculty and staff persona",
                  caption: "Prospective student 3"
                }
              ]}
            />
          </div>
          <p className="text-sm text-zinc-600 dark:text-zinc-400 italic mt-2">
            Personas kept debates short. Not because everyone agreed, but because we agreed who we were designing for.
          </p>
        </div>
      ),
    },
    {
      title: 'Module design',
      content: (
        <div className="prose prose-zinc dark:prose-invert max-w-none">
          <h3 className="mt-0">Keeping Things Systematic</h3>
          <p>We designed a library of <Tooltip content="Prebuilt, reusable page building blocks that share inputs, variants, and rules—keeping pages consistent and faster to assemble."><span className="font-bold">reusable page modules</span></Tooltip> (heroes, program cards, stats blocks, admissions CTAs, content sections) with:</p>
          <ul>
            <li>clear inputs</li>
            <li>clear variants</li>
            <li>rules for when to use what</li>
          </ul>
          <p>This is where the consistency debt gets paid down. Once modules are stable, pages stop feeling like bespoke one-offs and start feeling like one product.</p>
          <Figure
            src="/images/case-studies/cornell-university/cornell-fieldchip.avif"
            alt="Standardized module components and documentation"
            caption="One pattern, many contexts. Fewer decisions. Better consistency."
          />
        </div>
      ),
    },
    {
      title: 'Navigation system',
      content: (
        <div className="prose prose-zinc dark:prose-invert max-w-none">
          <h3 className="mt-0"><Tooltip content="A governed set of global, sectional, and in-page patterns with naming/grouping rules so navigation feels predictable everywhere."><span className="font-bold">Patterns and Rules</span></Tooltip></h3>
          <p>Navigation was treated as a system, not a set of menus.</p>
          <p>We prototyped and iterated:</p>
          <ul>
            <li>global navigation</li>
            <li>sectional navigation</li>
            <li>in-page wayfinding</li>
          </ul>
          <p>Then we documented naming and grouping rules tied to user tasks. The goal was simple: the same type of user should get the same type of path, regardless of which school’s content they started on.</p>
          <div className="my-4">
            <FocusImageGallery
              images={[
                {
                  src: '/images/case-studies/cornell-university/cornell-nav-flow.jpg',
                  alt: 'Navigation flow and information architecture',
                  caption: 'Clear navigation rules that scale across all three schools',
                },
                {
                  src: '/images/case-studies/cornell-university/Cornell-nav-flow2.png',
                  alt: 'Detailed navigation wireframes',
                  caption: 'Detailed wireframes showing consistent navigation patterns',
                },
              ]}
            />
          </div>
        </div>
      ),
    },
    {
      title: 'Handoff',
      content: (
        <div className="prose prose-zinc dark:prose-invert max-w-none">
          <h3 className="mt-0">So our work lives beyond us</h3>
          <p>The work only matters if it survives the handoff.</p>
          <p>We organized the <Tooltip content="A Figma library of reusable components—organized with design tokens (colors, fonts), interaction logic, and even bezier curves for consistent motion."><span className="font-bold">design system</span></Tooltip> and documentation so Cornell’s team could:</p>
          <ul>
            <li>onboard quickly</li>
            <li>implement predictably</li>
            <li>evolve the system without re-breaking consistency</li>
          </ul>
          <p>This meant clean component structure, naming, <Tooltip content="Design tokens that standardize spacing, color, and typography values so engineers and designers stay in sync."><span className="font-bold">spacing/token logic</span></Tooltip>, and “<Tooltip content="Lightweight product requirements that document intent, states, and edge cases without a bloated PRD."><span className="font-bold">PRD-lite</span></Tooltip>” specs that reduced interpretation gaps.</p>
        </div>
      ),
    },
  ]

  // Orbiting circles visual for the Context section
  const orbitingCirclesVisual = (
    <OrbitContainer
      height="h-[360px]"
      center={
        <div className="flex size-16 items-center justify-center rounded-full bg-emerald-50/90 text-emerald-800 ring-2 ring-emerald-200 backdrop-blur-sm shadow-lg dark:bg-emerald-900/60 dark:text-emerald-100 dark:ring-emerald-800/60">
          <GraduationCap className="h-6 w-6" aria-label="SC Johnson College of Business" />
        </div>
      }
    >
      {/* Outer orbit - schools */}
      <OrbitingCircles radius={150} duration={26} iconSize={50}>
        <div className="flex size-full items-center justify-center rounded-full bg-red-50 text-red-700 ring-2 ring-red-100 dark:bg-red-950 dark:text-red-200 dark:ring-red-900/40 font-semibold text-[11px]">
          Johnson
        </div>
        <div className="flex size-full items-center justify-center rounded-full bg-blue-50 text-blue-700 ring-2 ring-blue-100 dark:bg-blue-950 dark:text-blue-200 dark:ring-blue-900/40 font-semibold text-[11px]">
          Nolan
        </div>
        <div className="flex size-full items-center justify-center rounded-full bg-amber-50 text-amber-700 ring-2 ring-amber-100 dark:bg-amber-950 dark:text-amber-200 dark:ring-amber-900/40 font-semibold text-[11px]">
          Dyson
        </div>
      </OrbitingCircles>

      {/* Inner orbit - system/process icons */}
      <OrbitingCircles radius={95} duration={18} reverse iconSize={42}>
        <div className="flex size-full items-center justify-center rounded-full bg-red-50 text-red-700 ring-2 ring-red-100 dark:bg-red-950 dark:text-red-200 dark:ring-red-900/40">
          <Network className="h-6 w-6" />
        </div>
        <div className="flex size-full items-center justify-center rounded-full bg-blue-50 text-blue-700 ring-2 ring-blue-100 shadow-md dark:bg-blue-950/60 dark:text-blue-200 dark:ring-blue-900/40">
          <GitBranch className="h-6 w-6" />
        </div>
        <div className="flex size-full items-center justify-center rounded-full bg-amber-50 text-amber-700 ring-2 ring-amber-100 shadow-md dark:bg-amber-950/60 dark:text-amber-200 dark:ring-amber-900/40">
          <GitCompare className="h-6 w-6" />
        </div>
      </OrbitingCircles>
    </OrbitContainer>
  )

  return (
    <CaseStudyViewer caseStudy={caseStudy} metrics={metrics}>
      {/* Context Section - 50/50 layout with orbiting circles */}
      <SplitSection
        visual={orbitingCirclesVisual}
        align="center"
      >
        <Heading id="context" level={2} className="mt-0">Context</Heading>
        <p>In 2016, Cornell combined three business schools under the SC Johnson College of Business (Johnson, Nolan, and Dyson). By 2024, the web experience still behaved like three separate institutions: different navigation patterns, different terminology, and different page structures that made it harder than it should be to do basic tasks.</p>
        <p>Prospective students were the clearest signal. They were trying to compare programs, understand admissions, and find requirements quickly. Instead, they kept running into mismatch: "same goal, different layout, different labels." That kind of inconsistency quietly erodes trust, and it's especially costly on high-intent journeys.</p>
        <p>I joined the project via Briteweb to help diagnose the problem, align stakeholders, and design a system Cornell's internal team could own and evolve.</p>
      </SplitSection>

      {/* The Problem Section - mixed full-width and split layout */}
      <section className="mb-16 space-y-8">
        <div className="prose prose-zinc dark:prose-invert max-w-none">
          <Heading id="the-mess" level={2} className="mt-0">The Problem</Heading>
          <p>The core issue wasn't a lack of content. It was a lack of shared rules.</p>
        </div>

        <SplitSection
          align="center"
          flip
          visual={
            <div className="w-full rounded-xl border border-zinc-200 bg-white dark:border-zinc-800 dark:bg-zinc-900/50">
              <div className="p-4">
                <Tree initialExpandedItems={['root', 'johnson']} initialSelectedId="johnson-nav">
                  <Folder element="Root IA (should be one system)" value="root" isSelectable={false}>
                    <Folder element="Johnson" value="johnson">
                      <File value="johnson-nav">nav.json (Programs / Faculty / Apply)</File>
                      <File value="johnson-cta">cta.yaml (Request Info)</File>
                    </Folder>
                    <Folder element="Nolan" value="nolan">
                      <File value="nolan-nav">navigation.yml (Degrees / Admissions / Visit)</File>
                      <File value="nolan-cta">cta.yml (Schedule a tour)</File>
                    </Folder>
                    <Folder element="Dyson" value="dyson">
                      <File value="dyson-nav">nav.config (Academics / Costs / Aid)</File>
                      <File value="dyson-cta">cta.json (Meet a counselor)</File>
                    </Folder>
                    <File value="global-search" isSelectable={false}>
                      search-index.csv (3 schemas, no shared taxonomy)
                    </File>
                  </Folder>
                </Tree>
              </div>
            </div>
          }
        >
          <ul>
            <li>Navigation changed depending on which school you were browsing.</li>
            <li>Identical concepts were labeled differently across sections.</li>
            <li>Page modules looked similar enough to feel "almost consistent," but behaved differently in ways that made users second-guess themselves.</li>
            <li>
              Internally, this created a{' '}
              <Tooltip
                containerClassName="inline"
                content="Accumulated inconsistencies that make every new design or page slower because decisions keep getting re-made."
              >
                <span className="font-bold">design debt</span>
              </Tooltip>{' '}
              problem: every new page required re-deciding patterns that should have been conventionalized at the college level.
            </li>
          </ul>
        </SplitSection>

      </section>

      {/* Quote Block */}
      <QuoteBlock>
        If a user needs a mental model of Cornell's org chart to find a programme, we've already lost.
      </QuoteBlock>

      {/* How I Created Clarity */}
      <section className="mb-16">
        <div className="prose prose-zinc dark:prose-invert max-w-none">
          <Heading id="how-i-created-clarity" level={2} label="Approach">
            How I Created Clarity
          </Heading>
          <p>I worked as a UX strategist and systems designer. My job was to turn a multi-stakeholder, multi-site reality into a coherent digital experience with rules the team could actually run with. I approached this like any other "merged product": start by understanding where users fall off, then build a system that prevents the same problems from reappearing.</p>
        </div>
        <div className="mt-10">
          <Timeline data={approachTimeline} />
        </div>
      </section>

      {/* Where AI Helped */}
      <section className="mb-16">
        <div className="prose prose-zinc dark:prose-invert max-w-none">
          <Heading id="where-ai-helped" level={2} label="AI Integration">Practical AI</Heading>
          <p>The strategy with AI on this project wasn't "AI magic." It was internal acceleration—fewer hours spent on admin work, more time making the system coherent. Fast first drafts, fast consistency checks, more iteration momentum, more time for the real work: stakeholder alignment, simplifying journeys, attacking user problems.</p>
          <p><strong>Where AI helped:</strong></p>
          <ul>
            <li><strong><Tooltip content="AI-assisted grouping of content and labels to propose an information architecture faster—humans still approve the final taxonomy."><span className="font-bold">IA clustering support</span></Tooltip>:</strong> accelerated early grouping and surfaced naming collisions. We made the decisions.</li>
            <li><strong>Story synthesis:</strong> drafted first-pass user stories from research notes, then edited for accuracy and tone.</li>
            <li><strong><Tooltip content="Automated checks that flag inconsistent labels and naming collisions across sections so we can standardize intentionally."><span className="font-bold">Terminology linting</span></Tooltip>:</strong> flagged inconsistent labels between schools so we could standardize intentionally.</li>
            <li><strong>Doc automation:</strong> generated checklists from module specs to speed QA and reduce missed edge cases.</li>
          </ul>
        </div>
      </section>

      {/* Outcomes & Artefacts */}
      <section className="mb-16">
        <div className="prose prose-zinc dark:prose-invert max-w-none mb-8">
          <Heading id="outcomes" level={2}>Outcomes & Artefacts</Heading>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 my-8">
          <LearningCard 
            title="Findability & Speed"
            icon="Search"
          >
            Time-to-find dropped to under two minutes for core program information in prototype testing. The IA restructure turned navigation from a guessing game into a predictable path.
          </LearningCard>

          <LearningCard 
            title="System Foundation"
            icon="Layers"
          >
            ~55 modules and screens wireframed to establish reusable patterns. Pages stopped being bespoke one-offs and started feeling like one cohesive product.
          </LearningCard>

          <LearningCard 
            title="Annotated Wireframes"
            icon="BookOpen"
          >
            Built to last: the documented module library reduced consistency debt and made future page creation calmer and faster for Cornell's internal team—long after we left.
          </LearningCard>
        </div>

        <div className="mt-16">
          <HalfContentSection
            eyebrow="Handoff Documentation"
            title="Annotated Wireframes"
            subtitle="Bridging design intent to implementation"
            accentColor="emerald"
            flip={false}
            fullWidth={true}
            parallax={true}
            imageSrc="/images/case-studies/cornell-university/on-page-sidebar-documentation.png"
            darkModeImageSrc="/images/case-studies/cornell-university/on-page-sidebar-documentation-dark.png"
            imageAlt="Annotated documentation showing on-page sidebar component anatomy, interactions, and visual feedback states"
            description={
              <p>
                Every module we designed came with supporting documentation that explained not just <em>what</em> something looks like, but <em>how</em> it behaves and <em>why</em> it works that way. This approach reduced interpretation gaps during implementation and gave Cornell's team a reference they could return to long after our engagement ended.
              </p>
            }
            features={[
              {
                icon: <Layers className="h-5 w-5" />,
                title: "Component Anatomy",
                description: "Each module was broken down into parent and child components, with clear hierarchy and naming conventions that mapped directly to implementation."
              },
              {
                icon: <FileText className="h-5 w-5" />,
                title: "Interaction Logic",
                description: "Expand/collapse behaviors, navigation flows, and state changes were documented with specific triggers and expected outcomes."
              },
              {
                icon: <MessageSquare className="h-5 w-5" />,
                title: "Visual Feedback",
                description: "Hover states, active indicators, and location highlights were specified so users always know where they are and what's interactive."
              }
            ]}
            additionalContent={
              <>
                <p className="mt-8">
                  The on-page content sidebar shown here is a good example. It needed to reflect the page's hierarchy, allow users to navigate to specific sections, and communicate their current position as they scroll. That's a lot of behavior to get right—and easy to misinterpret without clear documentation.
                </p>
                <h3 className="mt-12 text-2xl font-bold tracking-tight text-zinc-900 dark:text-white">
                  Built for Handoff, Not Just Presentation
                </h3>
                <p className="mt-6">
                  These weren't presentation decks designed to impress stakeholders. They were working documents designed to reduce back-and-forth between design and development. When a developer had a question about edge cases or interaction states, the answer was already documented.
                </p>
                <p className="mt-6">
                  The result: faster implementation, fewer misinterpretations, and a system Cornell's team could maintain and extend without needing to reverse-engineer our intent.
                </p>
              </>
            }
          />
        </div>
      </section>

      {/* Learnings */}
      <section className="mb-16">
        <div className="prose prose-zinc dark:prose-invert max-w-none mb-8">
          <Heading id="learnings" level={2}>Learnings</Heading>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 my-8">
          <LearningCard 
            title="In complex institutions, consistency is a trust feature."
            icon="Shield"
          >
            If the same action "looks different" across sections, users start second-guessing the whole system.
          </LearningCard>

          <LearningCard 
            title="Mergers don't just need new visuals. They need shared rules."
            icon="Layers"
          >
            Once the rules exist, design and content work stop being a recurring negotiation.
          </LearningCard>

          <LearningCard 
            title="AI is most useful when it accelerates the unglamorous parts."
            icon="Sparkles"
          >
            Clustering, drafts, consistency checks. The value is time and focus, not novelty.
          </LearningCard>
        </div>
      </section>

      {/* Credits */}
      <section className="mt-16 pt-8 border-t border-zinc-200 dark:border-zinc-700">
        <div className="prose prose-zinc dark:prose-invert max-w-none">
          <h3>Credits</h3>
          <p>Cornell SC Johnson College of Business, Briteweb team, and the stakeholders who trusted us to bridge three institutions into one cohesive digital experience.</p>
        </div>
      </section>
    </CaseStudyViewer>
  )
}
export const dynamic = 'error'
