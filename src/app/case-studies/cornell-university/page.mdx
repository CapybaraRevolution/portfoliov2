import { CaseStudyViewer } from '@/components/CaseStudyViewer'
import { getCaseStudyBySlug } from '@/lib/caseStudies'
import { Figure } from '@/components/mdx/CaseStudyComponents'
import { ConstructionBanner } from '@/components/ui/ConstructionBanner'
import { GoalBlock } from '@/components/case-studies/GoalBlock'
import { ImageGallery } from '@/components/ui/image-gallery'
import { Safari } from '@/components/ui/safari'
import { NumberTicker } from '@/components/ui/number-ticker'
import { Heading } from '@/components/Heading'
import { OrbitingCircles } from '@/components/ui/orbiting-circles'
import { Tree, Folder, File } from '@/components/ui/file-tree'
import { TextAnimate } from '@/components/ui/text-animate'
import { Timeline } from '@/components/ui/newacetimeline'
import { Tooltip } from '@/components/ui/tooltip-card'
import { GitBranch, GitCompare, Sitemap } from 'lucide-react'

export const metadata = {
  title: 'Cornell University — SC Johnson College of Business - Case Study',
  description: 'Unifying three distinct institutions through a cohesive digital experience',
}

export const sections = [
  { title: 'Goal & Context', id: 'goal' },
  { title: 'The Mess', id: 'the-mess' },
  { title: 'My Role', id: 'my-role' },
  { title: 'How I Created Clarity', id: 'how-i-created-clarity' },
  { title: 'Practical AI', id: 'where-ai-helped' },
  { title: 'Outcomes', id: 'outcomes' },
  { title: 'Learnings', id: 'learnings' },
]

export default function CornellUniversityCaseStudy() {
  const caseStudy = getCaseStudyBySlug('cornell-university')

  if (!caseStudy) {
    return <div>Case study not found</div>
  }

  // Results metrics - directional
  const metrics = [
    {
      label: 'Time To Find Program Info',
      value: 1.7,
      suffix: ' min',
      description: 'Directional from prototype testing',
    },
    {
      label: 'Personas Defined',
      value: 3,
      description: 'Core personas to anchor decisions',
    },
    {
      label: 'Modules & Screens Wireframed',
      value: 55,
      description: 'System-first approach to reduce one-off decisions',
    },
  ]

  const approachTimeline = [
    {
      title: 'Insight work',
      content: (
        <div className="prose prose-zinc dark:prose-invert max-w-none">
          <h3 className="mt-0">1) Insight work (data-informed, human-interpreted)</h3>
          <p>We triangulated quantitative signals (<Tooltip content="Behavior analytics for seeing how people actually navigate via heatmaps, scroll depth, and session replays."><span className="font-bold">Hotjar</span></Tooltip> + <Tooltip content="Google Analytics—traffic and event data that shows what’s happening at scale."><span className="font-bold">GA</span></Tooltip>) with qualitative observation to locate friction and validate what the data couldn’t explain on its own.</p>
          <p>The output wasn’t a giant research deck. It was a practical map:</p>
          <ul>
            <li>the journeys that matter most (especially prospective students)</li>
            <li>the pages and modules that were creating drop-offs</li>
            <li>a clear “problem → hypothesis → design probe → success signal” trail</li>
          </ul>
          <details className="mt-4">
            <summary className="font-bold cursor-pointer hover:text-emerald-600 dark:hover:text-emerald-400 text-base">
              Nerdy aside: how we used data without drowning in it
            </summary>
            <div className="p-4 mt-2 bg-zinc-50 dark:bg-zinc-800/50 rounded-lg">
              <p className="mb-4">We treated analytics like a map for where to look, and observation like a metal detector for the exact spot to dig.</p>
              <Figure
                src="/images/case-studies/cornell-university/treasuremap.jpg"
                alt="Treasure map metaphor"
                caption="Data as a treasure map: showing us where to dig deeper"
              />
              <Figure
                src="/images/case-studies/cornell-university/nerdycornelldata.jpg"
                alt="Annotated Hotjar data"
                caption="Pinpointing the right problems made the design work calmer and faster"
              />
            </div>
          </details>
        </div>
      ),
    },
    {
      title: 'Personas',
      content: (
        <div className="prose prose-zinc dark:prose-invert max-w-none">
          <h3 className="mt-0">2) Anchor decisions with personas + user stories</h3>
          <p>We defined and validated three core <Tooltip content="Research-backed archetypes that represent key user types, used to keep decisions anchored to real needs instead of opinions."><span className="font-bold">personas</span></Tooltip> to keep decisions grounded, especially when stakeholder opinions diverged (which they will, because they’re stakeholders).</p>
          <p>The key benefit was speed with integrity: when the persona is clear, decisions stop being philosophical.</p>
          <Safari url="cornell.edu">
            <img
              src="/images/case-studies/cornell-university/persona-slide1.avif"
              alt="Prospective student persona and user stories"
              className="w-full h-auto object-contain"
            />
          </Safari>
          <p className="text-sm text-zinc-600 dark:text-zinc-400 italic mt-3">
            Personas kept debates short. Not because everyone agreed, but because we agreed who we were designing for.
          </p>
        </div>
      ),
    },
    {
      title: 'Module design',
      content: (
        <div className="prose prose-zinc dark:prose-invert max-w-none">
          <h3 className="mt-0">3) Module design (system first)</h3>
          <p>We designed a library of <Tooltip content="Prebuilt, reusable page building blocks that share inputs, variants, and rules—keeping pages consistent and faster to assemble."><span className="font-bold">reusable page modules</span></Tooltip> (heroes, program cards, stats blocks, admissions CTAs, content sections) with:</p>
          <ul>
            <li>clear inputs</li>
            <li>clear variants</li>
            <li>rules for when to use what</li>
          </ul>
          <p>This is where the consistency debt gets paid down. Once modules are stable, pages stop feeling like bespoke one-offs and start feeling like one product.</p>
          <Figure
            src="/images/case-studies/cornell-university/cornell-fieldchip.avif"
            alt="Standardized module components and documentation"
            caption="One pattern, many contexts. Fewer decisions. Better consistency."
          />
        </div>
      ),
    },
    {
      title: 'Navigation system',
      content: (
        <div className="prose prose-zinc dark:prose-invert max-w-none">
          <h3 className="mt-0"><Tooltip content="A governed set of global, sectional, and in-page patterns with naming/grouping rules so navigation feels predictable everywhere."><span className="font-bold">4) Navigation system (patterns + rules)</span></Tooltip></h3>
          <p>Navigation was treated as a system, not a set of menus.</p>
          <p>We prototyped and iterated:</p>
          <ul>
            <li>global navigation</li>
            <li>sectional navigation</li>
            <li>in-page wayfinding</li>
          </ul>
          <p>Then we documented naming and grouping rules tied to user tasks. The goal was simple: the same type of user should get the same type of path, regardless of which school’s content they started on.</p>
          <ImageGallery
            images={[
              {
                src: '/images/case-studies/cornell-university/cornell-nav-flow.jpg',
                alt: 'Navigation flow and information architecture',
                caption: 'Clear navigation rules that scale across all three schools',
              },
              {
                src: '/images/case-studies/cornell-university/Cornell-nav-flow2.png',
                alt: 'Detailed navigation wireframes',
                caption: 'Detailed wireframes showing consistent navigation patterns',
              },
            ]}
          />
        </div>
      ),
    },
    {
      title: 'Handoff',
      content: (
        <div className="prose prose-zinc dark:prose-invert max-w-none">
          <h3 className="mt-0">5) Handoff (so it lives beyond us)</h3>
          <p>The work only matters if it survives the handoff.</p>
          <p>We organized the <Tooltip content="A Figma library of reusable components—organized with design tokens (colors, fonts), interaction logic, and even bezier curves for consistent motion."><span className="font-bold">design system</span></Tooltip> and documentation so Cornell’s team could:</p>
          <ul>
            <li>onboard quickly</li>
            <li>implement predictably</li>
            <li>evolve the system without re-breaking consistency</li>
          </ul>
          <p>This meant clean component structure, naming, <Tooltip content="Design tokens that standardize spacing, color, and typography values so engineers and designers stay in sync."><span className="font-bold">spacing/token logic</span></Tooltip>, and “<Tooltip content="Lightweight product requirements that document intent, states, and edge cases without a bloated PRD."><span className="font-bold">PRD-lite</span></Tooltip>” specs that reduced interpretation gaps.</p>
        </div>
      ),
    },
  ]

  const heroImage = (
    <div className="relative mx-auto flex h-72 w-full max-w-3xl items-center justify-center">
      <div className="absolute inset-0">
        <OrbitingCircles radius={140} duration={18} iconSize={52} className="bg-white/80 text-red-700 ring-2 ring-red-100 shadow-md dark:bg-white/10 dark:text-red-300 dark:ring-white/10">
          <div className="flex size-full items-center justify-center rounded-full">
            <Sitemap className="h-7 w-7" />
          </div>
          <div className="flex size-full items-center justify-center rounded-full bg-blue-50 text-blue-700 ring-2 ring-blue-100 shadow-md dark:bg-blue-950/40 dark:text-blue-200 dark:ring-blue-900/40">
            <GitBranch className="h-7 w-7" />
          </div>
          <div className="flex size-full items-center justify-center rounded-full bg-amber-50 text-amber-700 ring-2 ring-amber-100 shadow-md dark:bg-amber-950/40 dark:text-amber-200 dark:ring-amber-900/40">
            <GitCompare className="h-7 w-7" />
          </div>
        </OrbitingCircles>
        <OrbitingCircles
          radius={100}
          duration={12}
          reverse
          iconSize={40}
          className="bg-emerald-50 text-emerald-700 ring-2 ring-emerald-100 shadow-sm dark:bg-emerald-900/30 dark:text-emerald-200 dark:ring-emerald-900/50"
        >
          <div className="flex size-full items-center justify-center rounded-full font-semibold text-xs">
            Johnson
          </div>
          <div className="flex size-full items-center justify-center rounded-full font-semibold text-xs">
            Nolan
          </div>
          <div className="flex size-full items-center justify-center rounded-full font-semibold text-xs">
            Dyson
          </div>
        </OrbitingCircles>
      </div>
      <div className="relative z-10 flex size-32 items-center justify-center rounded-full bg-emerald-50/80 text-center text-sm font-semibold text-emerald-800 ring-2 ring-emerald-100 backdrop-blur-sm shadow-lg dark:bg-emerald-900/50 dark:text-emerald-100 dark:ring-emerald-800/60">
        SC Johnson College<br />System Alignment
      </div>
    </div>
  )

  return (
    <CaseStudyViewer caseStudy={caseStudy} metrics={metrics} heroImage={heroImage}>
      <ConstructionBanner />
      
      {/* Goal Section */}
      <section className="mb-16">
        <GoalBlock 
          goal="Unify three distinct schools into one digital experience that feels coherent, findable, and maintainable"
          goalDetail="This was not a visual refresh. It was a system-building job: shared navigation rules, shared page modules, and shared language, without sanding off each school's identity."
        />
        <div className="mt-4">
          <span className="inline-flex items-center rounded-full border border-emerald-200 dark:border-emerald-800 bg-emerald-50/50 dark:bg-emerald-950/30 px-3 py-1 text-xs font-medium text-emerald-700 dark:text-emerald-300">
            AI-accelerated (human-reviewed): used to speed first drafts and consistency checks, never to "decide."
          </span>
        </div>
      </section>

      {/* Context Section - 50/50 layout */}
      <section className="mb-16">
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
          <div className="prose prose-zinc dark:prose-invert max-w-none">
            <h2 id="context" className="mt-0 scroll-mt-24">Context</h2>
            <p>In 2016, Cornell combined three business schools under the SC Johnson College of Business (Johnson, Nolan, and Dyson). By 2024, the web experience still behaved like three separate institutions: different navigation patterns, different terminology, and different page structures that made it harder than it should be to do basic tasks.</p>
            <p>Prospective students were the clearest signal. They were trying to compare programs, understand admissions, and find requirements quickly. Instead, they kept running into mismatch: "same goal, different layout, different labels." That kind of inconsistency quietly erodes trust, and it's especially costly on high-intent journeys.</p>
            <p>I joined the project via Briteweb to help diagnose the problem, align stakeholders, and design a system Cornell's internal team could own and evolve.</p>
          </div>
          <div className="rounded-xl overflow-hidden flex items-center justify-center">
            <CaseImage
              src="/images/case-studies/cornell-university/cornelllogo.webp"
              alt="Cornell University SC Johnson College of Business"
              variant="logo"
            />
          </div>
        </div>
      </section>

      {/* The Mess Section - 50/50 layout, flipped */}
      <section className="mb-16">
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
          <div className="rounded-xl overflow-hidden order-2 lg:order-1 border border-zinc-200 bg-white dark:border-zinc-800 dark:bg-zinc-900/50">
            <div className="p-4">
              <Tree initialExpandedItems={['root', 'johnson']} initialSelectedId="johnson-nav">
                <Folder element="Root IA (should be one system)" value="root" isSelectable={false}>
                  <Folder element="Johnson" value="johnson">
                    <File value="johnson-nav">nav.json (Programs / Faculty / Apply)</File>
                    <File value="johnson-cta">cta.yaml (Request Info)</File>
                  </Folder>
                  <Folder element="Nolan" value="nolan">
                    <File value="nolan-nav">navigation.yml (Degrees / Admissions / Visit)</File>
                    <File value="nolan-cta">cta.yml (Schedule a tour)</File>
                  </Folder>
                  <Folder element="Dyson" value="dyson">
                    <File value="dyson-nav">nav.config (Academics / Costs / Aid)</File>
                    <File value="dyson-cta">cta.json (Meet a counselor)</File>
                  </Folder>
                  <File value="global-search" isSelectable={false}>
                    search-index.csv (3 schemas, no shared taxonomy)
                  </File>
                </Folder>
              </Tree>
            </div>
          </div>
          <div className="prose prose-zinc dark:prose-invert max-w-none order-1 lg:order-2">
            <h2 id="the-mess" className="mt-0 scroll-mt-24">The Mess</h2>
            <p>The core issue wasn't a lack of content. It was a lack of shared rules.</p>
            <ul>
              <li>Navigation changed depending on which school you were browsing.</li>
              <li>Identical concepts were labeled differently across sections.</li>
              <li>Page modules looked similar enough to feel "almost consistent," but behaved differently in ways that made users second-guess themselves.</li>
              <li>Internally, this created a <Tooltip content="Accumulated inconsistencies that make every new design or page slower because decisions keep getting re-made."><span className="font-bold">design debt</span></Tooltip> problem: every new page required re-deciding patterns that should have been settled once.</li>
            </ul>
            <p>If a user needs a mental model of Cornell's org chart to find a program, the system has already lost.</p>
            <p className="italic">The work ahead was less "make it prettier," more "make it predictable."</p>
          </div>
        </div>
      </section>

      {/* Quote Block */}
      <QuoteBlock>
        <TextAnimate
          by="word"
          animation="blurInUp"
          className="text-2xl md:text-3xl font-medium text-zinc-600 dark:text-zinc-300 leading-relaxed"
          segmentClassName="mr-2"
        >
          If a user needs a mental model of Cornell's org chart to find a program, the system has already lost.
        </TextAnimate>
      </QuoteBlock>

      {/* My Role Section */}
      <section className="mb-16">
        <div className="prose prose-zinc dark:prose-invert max-w-none">
          <h2 id="my-role" className="scroll-mt-24">My Role</h2>
          <p>I worked as a UX strategist and systems designer. My job was to turn a multi-stakeholder, multi-site reality into a coherent digital experience with rules the team could actually run with.</p>
          <p><strong>What I optimized for:</strong></p>
          <ol>
            <li><strong>Alignment:</strong> getting stakeholders to agree on shared language and shared priorities.</li>
            <li><strong>Clarity:</strong> reducing interpretation gaps by making patterns explicit.</li>
            <li><strong>Maintainability:</strong> a module system and navigation rules that scale without redesigning the site every semester.</li>
          </ol>
        </div>
      </section>

      {/* How I Created Clarity */}
      <section className="mb-16">
        <div className="prose prose-zinc dark:prose-invert max-w-none">
          <Heading id="how-i-created-clarity" level={2} label="Approach">
            How I Created Clarity
          </Heading>
          <p>I approached this like any other "merged product": start by understanding where users fall off, then build a system that prevents the same problems from reappearing.</p>
        </div>
        <div className="mt-10">
          <Timeline data={approachTimeline} />
        </div>
      </section>

      {/* Where AI Helped */}
      <section className="mb-16">
        <div className="prose prose-zinc dark:prose-invert max-w-none mb-8">
          <Heading id="where-ai-helped" level={2} label="AI Integration">Practical AI</Heading>
          <p>We used AI like an assistant, not an authority: fast first drafts, faster consistency checks, and more time for the real work (stakeholder alignment and simplifying journeys).</p>
          <p><strong>Human-in-the-loop, safety-first:</strong></p>
          <ul>
            <li><strong><Tooltip content="AI-assisted grouping of content and labels to propose an information architecture faster—humans still approve the final taxonomy."><span className="font-bold">IA clustering support</span></Tooltip>:</strong> accelerated early grouping and surfaced naming collisions. We made the decisions.</li>
            <li><strong>Story synthesis:</strong> drafted first-pass user stories from research notes, then edited for accuracy and tone.</li>
            <li><strong><Tooltip content="Automated checks that flag inconsistent labels and naming collisions across sections so we can standardize intentionally."><span className="font-bold">Terminology linting</span></Tooltip>:</strong> flagged inconsistent labels between schools so we could standardize intentionally.</li>
            <li><strong>Doc automation:</strong> generated checklists from module specs to speed QA and reduce missed edge cases.</li>
          </ul>
          <p>The result was not "AI magic." It was fewer hours spent on admin work and more time spent making the system coherent.</p>
        </div>
        {/* TODO: Add CornellAIBento component here when ready */}
      </section>

      {/* Outcomes */}
      <section className="mb-16">
        <div className="prose prose-zinc dark:prose-invert max-w-none mb-8">
          <h2 id="outcomes" className="scroll-mt-24">Outcomes</h2>
          <p>Outcomes are directional and safe-to-share:</p>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 my-8">
          <div className="bg-white dark:bg-zinc-800 rounded-lg border border-zinc-200 dark:border-zinc-700 p-6">
            <div className="text-3xl font-bold text-emerald-600 dark:text-emerald-400 mb-2">
              <NumberTicker value={1.7} /> min
            </div>
            <div className="text-sm font-medium text-zinc-900 dark:text-zinc-100 mb-1">
              Time-to-find for core program information
            </div>
            <div className="text-xs text-zinc-500 dark:text-zinc-400">
              Dropped to under two minutes in testing (directional)
            </div>
          </div>

          <div className="bg-white dark:bg-zinc-800 rounded-lg border border-zinc-200 dark:border-zinc-700 p-6">
            <div className="text-3xl font-bold text-emerald-600 dark:text-emerald-400 mb-2">
              <NumberTicker value={3} />
            </div>
            <div className="text-sm font-medium text-zinc-900 dark:text-zinc-100 mb-1">
              Personas defined and socialized
            </div>
            <div className="text-xs text-zinc-500 dark:text-zinc-400">
              To align stakeholders
            </div>
          </div>

          <div className="bg-white dark:bg-zinc-800 rounded-lg border border-zinc-200 dark:border-zinc-700 p-6">
            <div className="text-3xl font-bold text-emerald-600 dark:text-emerald-400 mb-2">
              ~<NumberTicker value={55} />
            </div>
            <div className="text-sm font-medium text-zinc-900 dark:text-zinc-100 mb-1">
              Modules/screens wireframed
            </div>
            <div className="text-xs text-zinc-500 dark:text-zinc-400">
              To establish the system and reduce one-off design decisions
            </div>
          </div>
        </div>

        <div className="prose prose-zinc dark:prose-invert max-w-none mt-8">
          <ul>
            <li>Findability improved in unmoderated tests on key tasks after IA/nav prototyping.</li>
            <li>The documented module library reduced consistency debt and made future page creation calmer and faster.</li>
          </ul>
        </div>
      </section>

      {/* Learnings */}
      <section className="mb-16">
        <div className="prose prose-zinc dark:prose-invert max-w-none mb-8">
          <h2 id="learnings" className="scroll-mt-24">Learnings</h2>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 my-8">
          <div className="bg-emerald-50 dark:bg-emerald-950/30 border border-emerald-200 dark:border-emerald-800 rounded-lg p-6 hover:shadow-lg transition-shadow">
            <h3 className="text-lg font-semibold text-emerald-900 dark:text-emerald-100 mb-3">
              1) In complex institutions, consistency is a trust feature.
            </h3>
            <p className="text-sm text-emerald-800 dark:text-emerald-200">
              If the same action "looks different" across sections, users start second-guessing the whole system.
            </p>
          </div>

          <div className="bg-emerald-50 dark:bg-emerald-950/30 border border-emerald-200 dark:border-emerald-800 rounded-lg p-6 hover:shadow-lg transition-shadow">
            <h3 className="text-lg font-semibold text-emerald-900 dark:text-emerald-100 mb-3">
              2) Mergers don't just need new visuals. They need shared rules.
            </h3>
            <p className="text-sm text-emerald-800 dark:text-emerald-200">
              Once the rules exist, design and content work stop being a recurring negotiation.
            </p>
          </div>

          <div className="bg-emerald-50 dark:bg-emerald-950/30 border border-emerald-200 dark:border-emerald-800 rounded-lg p-6 hover:shadow-lg transition-shadow">
            <h3 className="text-lg font-semibold text-emerald-900 dark:text-emerald-100 mb-3">
              3) AI is most useful when it accelerates the unglamorous parts.
            </h3>
            <p className="text-sm text-emerald-800 dark:text-emerald-200">
              Clustering, drafts, consistency checks. The value is time and focus, not novelty.
            </p>
          </div>
        </div>

        <div className="prose prose-zinc dark:prose-invert max-w-none mt-8">
          <p>This project was about clarity at scale: helping SC Johnson feel like one institution online, while still respecting what makes each school distinct.</p>
        </div>
      </section>

      {/* Credits */}
      <section className="mt-16 pt-8 border-t border-zinc-200 dark:border-zinc-700">
        <div className="prose prose-zinc dark:prose-invert max-w-none">
          <h3>Credits</h3>
          <p>Cornell SC Johnson College of Business, Briteweb team, and the stakeholders who trusted us to bridge three institutions into one cohesive digital experience.</p>
        </div>
      </section>
    </CaseStudyViewer>
  )
}
export const dynamic = 'error'
