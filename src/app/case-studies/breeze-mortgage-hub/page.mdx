import { CaseStudyViewer } from '@/components/CaseStudyViewer'
import { getCaseStudyBySlug } from '@/lib/caseStudies'
import { Figure } from '@/components/mdx/CaseStudyComponents'
import { QuoteBlock } from '@/components/case-studies/QuoteBlock'
import { SplitSection } from '@/components/case-studies/SplitSection'
import { ProseSection, ProseBlock } from '@/components/case-studies/ProseSection'
import { IntegrationIconCloud } from '@/components/ui/integration-icon-cloud'
import { AnimatedBeamDemo } from '@/components/ui/fixing-inputs'
import { FocusImageGallery } from '@/components/ui/focus-image-gallery'
import { Heading } from '@/components/Heading'
import { Compare } from '@/components/ui/compare'
import { Safari } from '@/components/ui/safari'
import { BentoGrid, BentoCard } from '@/components/ui/bento-grid'
import { AIFeaturesBento } from '@/components/case-studies/breeze/AIFeaturesBento'
import { Sparkles, FileText, MessageCircle, Bot } from 'lucide-react'
import { Tooltip } from '@/components/ui/tooltip-card'
import { AnimatedSafari } from '@/components/case-studies/AnimatedSafari'
import { LearningCard } from '@/components/case-studies/LearningCard'
import { FadeIn } from '@/components/ui/fade-in'

export const metadata = {
  title: 'Breeze Mortgage Hub - Case Study',
  description: 'Transforming an incomplete product into a modern AI-enabled mortgage experience.',
}

export const sections = [
  { title: 'The Problem', id: 'the-mess' },
  { title: 'My Role', id: 'my-role' },
  { title: 'How I Created Clarity', id: 'how-i-created-clarity' },
  { title: 'Practical AI', id: 'where-ai-fit' },
  { title: 'What Shipped', id: 'what-shipped' },
  { title: 'Learnings', id: 'learnings' },
]

export default function BreezeMortgageHubCaseStudy() {
  const caseStudy = getCaseStudyBySlug('breeze-mortgage-hub')
  
  if (!caseStudy) {
    return <div>Case study not found</div>
  }

  // Results metrics - aligned to buyer outcomes
  const metrics = [
    {
      label: 'Design System Components',
      value: 95,
      suffix: '+',
      description: 'Components designed, documented, and annotated in Figma',
      highlight: true,
    },
    {
      label: 'Screens Designed',
      value: 56,
      description: 'Broken out into 12 distinct user flows.',
      highlight: true,
    },
    {
      label: 'Feature Design Time Cut',
      value: 96,
      suffix: '%',
      description: 'From "six months of circling back" to alignment in a week',
      highlight: true,
    }
  ]

  return (
    <CaseStudyViewer caseStudy={caseStudy} metrics={metrics}>
      
      {/* The Problem - 50/50 layout with icon cloud */}
      <SplitSection
        align="center"
        visual={<IntegrationIconCloud className="h-[380px] w-full" />}
      >
        <Heading id="the-mess" level={2} className="mt-0">The Problem</Heading>
        <p>When I joined, the product was a mix of scattered wireframes, half-formed requirements, and a beta that looked and behaved like it had missed a few years of the internet. The value proposition wasn't landing, the flows didn't line up with user goals, and "what happens next" depended on who you asked that day.</p>
        <p>There was also an AI-shaped hole in the roadmap. Not "add AI because it's 2025," but grounded opportunities for categorization, classification, and guidance that could remove friction from the most tedious parts of the mortgage application process. None of that was framed yet.</p>
        <p>The harder part: we weren't just fixing the present. We also needed a clear future scope and a roadmap that wouldn't collapse under its own complexity.</p>
      </SplitSection>

      {/* My Role - 50/50 layout with animated beam (flipped) */}
      <SplitSection
        flip
        align="center"
        visual={<AnimatedBeamDemo />}
      >
        <Heading id="my-role" level={2} className="mt-0">My Role</Heading>
        <p>I was brought in as an independent contractor supporting the CEO as a UX lead and product strategist. My job was to turn a loose vision into a coherent system the team could build.</p>
        <p>The work helped move Breeze from "we have ideas" to "we have a product story investors can actually experience."</p>
        <p><strong>What I optimized for:</strong></p>
        <ul>
          <li>Clear <Tooltip containerClassName="inline" content="The structural design of how content and features are organized, labeled, and connected—think of it as the blueprint for where things live and how users find them."><span className="font-bold">information architecture</span></Tooltip> and navigation (so people stop getting lost)</li>
          <li>Consistent patterns and <Tooltip containerClassName="inline" content="Reusable UI building blocks (buttons, forms, cards) that behave the same way everywhere—reducing user confusion and speeding up development."><span className="font-bold">component behavior</span></Tooltip> (so the UI has "design DNA," not vibes)</li>
          <li>Requirements that are <Tooltip containerClassName="inline" content="Specifications detailed enough that engineers can build from them without guesswork—including edge cases, states, and expected behaviors."><span className="font-bold">dev-ready</span></Tooltip> (so shipping doesn't become an interpretive sport)</li>
        </ul>
      </SplitSection>

      {/* Quote Block */}
      <QuoteBlock className="mt-48 mb-4">
        Without time on our side, Clarity was the fastest way to buy runway.
      </QuoteBlock>

      {/* Before and After Comparison */}
      <AnimatedSafari className="mt-4 mb-16">
        <Safari url="breeze-mortgage-hub.com">
          <Compare
            firstImage="/images/case-studies/breeze-mortgage-hub/breezebefore.png"
            secondImage="/images/case-studies/breeze-mortgage-hub/breezeafter.png"
            firstImageClassName="object-contain object-center w-full h-full"
            secondImageClassname="object-contain object-center w-full h-full"
            className="w-full h-full"
            slideMode="drag"
            initialSliderPercentage={50}
          />
        </Safari>
      </AnimatedSafari>

      {/* How I Created Clarity */}
      <ProseSection>
        <ProseBlock>
          <Heading id="how-i-created-clarity" level={2} label="Before and After">How I Created Clarity</Heading>
          <p>I began with <Tooltip containerClassName="inline" content="The research phase where you learn about users, business goals, and constraints before designing anything—interviews, audits, and lots of 'why?' questions."><span className="font-bold">discovery</span></Tooltip>, an audit of what existed, and <Tooltip containerClassName="inline" content="Systematic review of competitor products to identify patterns, gaps, and opportunities—not to copy, but to understand industry conventions."><span className="font-bold">competitive scanning</span></Tooltip> across fintech and workflow-heavy tools. The goal wasn't to copy UI—it was to understand what "normal" looks like when complexity is handled well.</p>
          <p>I moved quickly into prototypes because we had a classic situation: about 60% of the product was understood, and the remaining 40% was a fog bank. Prototyping turned that fog into decisions. It surfaced broken assumptions early, <Tooltip containerClassName="inline" content="Reducing uncertainty by testing ideas before building—cheaper to fix a prototype than production code."><span className="font-bold">de-risked</span></Tooltip> future flows, and forced the information architecture to reveal where it would bend or break.</p>
        </ProseBlock>

        <ProseBlock delay={0.1}>
          <p>From there, I designed a full system—not isolated screens:</p>
          <ul>
            <li>End-to-end critical paths (application → documents → review → payments)</li>
            <li><Tooltip containerClassName="inline" content="Standardized rules for how UI elements look and behave—ensuring buttons, inputs, and feedback work consistently across the product."><span className="font-bold">Component patterns</span></Tooltip> for form fields, validation, status, and <Tooltip containerClassName="inline" content="A UX technique that reveals information gradually as needed, preventing overwhelm by showing only what's relevant at each step."><span className="font-bold">progressive disclosure</span></Tooltip> (so the UI stays calm even when the process isn't)</li>
            <li><Tooltip containerClassName="inline" content="Interactive mockups that simulate real product behavior—stakeholders can click through flows instead of imagining them from static screens."><span className="font-bold">Clickable prototypes</span></Tooltip> with meaningful states and transitions (not "<Tooltip containerClassName="inline" content="Demos that only show the ideal scenario—ignoring errors, edge cases, and the messy reality users actually encounter."><span className="font-bold">happy path theatre</span></Tooltip>")</li>
          </ul>
        </ProseBlock>
      </ProseSection>

      {/* Where AI Fit */}
      <ProseSection>
        <ProseBlock className="mb-8">
          <Heading id="where-ai-fit" level={2} label="AI Integration & Design">Practical AI</Heading>
          <p>We identified areas where AI could reduce grunt work without introducing risk. The goal was to assist with real end-user experiences—like predictive document classification, so humans can spend more time confirming instead of individually classifying bulk document uploads (T4/tax forms, income statements, proof of employment, etc.).</p>
        </ProseBlock>

        {/* Bento Grid showcasing AI features */}
        <FadeIn delay={0.15}>
          <div className="my-12">
            <AIFeaturesBento />
          </div>
        </FadeIn>
      </ProseSection>

      {/* What Shipped */}
      <ProseSection>
        <ProseBlock>
          <Heading id="what-shipped" level={2}>What Shipped</Heading>
          <p>This wasn't a single handoff file. It was a connected package:</p>
          <ul>
            <li>Interactive prototypes suitable for stakeholder and investor walkthroughs</li>
            <li>A componentized <Tooltip containerClassName="inline" content="A Figma library of reusable components—organized with design tokens (colors, fonts), interaction logic, and even bezier curves for consistent motion."><span className="font-bold">design system</span></Tooltip> foundation with interaction rules, states, and colour tokens.</li>
            <li><Tooltip containerClassName="inline" content="Deliverables designed to empower teams—wireframes, personas, user journey maps—giving everyone shared context on user needs and product direction."><span className="font-bold">UX artefacts</span></Tooltip> (journeys, <Tooltip containerClassName="inline" content="The structural blueprint of how content and features are organized—mapping where things live and how users navigate between them."><span className="font-bold">IA maps</span></Tooltip>, decision notes) anchored to user outcomes</li>
            <li>Dev-friendly <Tooltip containerClassName="inline" content="Specific conditions a feature must meet to be considered 'done'—removes ambiguity about what success looks like before code is written."><span className="font-bold">acceptance criteria</span></Tooltip> and requirements for high-risk or ambiguous areas</li>
          </ul>
        </ProseBlock>

        {/* Image Gallery with lightbox */}
        <FadeIn delay={0.1}>
          <div className="my-12">
            <FocusImageGallery 
              images={[
                {
                  src: "/images/case-studies/breeze-mortgage-hub/breezedash.png",
                  alt: "Broker workflow dashboard",
                  caption: "Dashboard that turns pipeline status into action, filterable by stage in the application process."
                },
                {
                  src: "/images/case-studies/breeze-mortgage-hub/Lawyer-Submit.png",
                  alt: "Client portal with tabbed navigation",
                  caption: "Client portal showing the selected client's status in the application process. Tabbed information architecture offered a wide breadth of information. As designers, we should always try to let the complexity live in the UI, as opposed to our users' heads."
                },
                {
                  src: "/images/case-studies/breeze-mortgage-hub/Chat.png",
                  alt: "Modernized chat system",
                  caption: "A modernized chat system allowed brokers to strategize or escalate particularly troublesome clients."
                }
              ]}
            />
          </div>
        </FadeIn>
      </ProseSection>

      {/* Learnings */}
      <ProseSection className="mb-0">
        <ProseBlock className="mb-8">
          <Heading id="learnings" level={2}>Learnings</Heading>
        </ProseBlock>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 my-8">
          <LearningCard 
            title="In early-stages: clarity beats velocity."
            icon="Eye"
            index={0}
          >
            Wireframes and prototypes discover where things bend or break. This prevents expensive mistakes later.
          </LearningCard>

          <LearningCard 
            title="Investors don't want a whitepaper."
            icon="Presentation"
            index={1}
          >
            They want to feel the product. Interactive prototypes compress explanation time. Less time arguing = more time to refining the product.
          </LearningCard>

          <LearningCard 
            title="Mortgages are complex. Keep the user's experience simple."
            icon="Heart"
            index={2}
          >
            When the system requires complexity: use progressive disclosure, clear status, the right guidance. Ensuring low <Tooltip containerClassName="inline" content="The mental effort required to use something—good design minimizes this by making interfaces intuitive and predictable."><span className="font-bold">cognitive load</span></Tooltip>.
          </LearningCard>
        </div>
      </ProseSection>
    </CaseStudyViewer>
  )
}
export const dynamic = 'error'
