import { CaseStudyViewer } from '@/components/CaseStudyViewer'
import { getCaseStudyBySlug } from '@/lib/caseStudies'
import { Figure } from '@/components/mdx/CaseStudyComponents'
import { QuoteBlock } from '@/components/case-studies/QuoteBlock'
import { SplitSection } from '@/components/case-studies/SplitSection'
import { ProseSection, ProseBlock } from '@/components/case-studies/ProseSection'
import { IntegrationIconCloud } from '@/components/ui/integration-icon-cloud'
import { AnimatedBeamDemo } from '@/components/ui/fixing-inputs'
import { FocusImageGallery } from '@/components/ui/focus-image-gallery'
import { Heading } from '@/components/Heading'
import { Compare } from '@/components/ui/compare'
import { Safari } from '@/components/ui/safari'
import { BentoGrid, BentoCard } from '@/components/ui/bento-grid'
import { AIFeaturesBento } from '@/components/case-studies/breeze/AIFeaturesBento'
import { Sparkles, FileText, MessageCircle, Bot } from 'lucide-react'
import { Tooltip } from '@/components/ui/tooltip-card'
import { AnimatedSafari } from '@/components/case-studies/AnimatedSafari'
import { LearningCard } from '@/components/case-studies/LearningCard'
import { FadeIn } from '@/components/ui/fade-in'
import { SparklesText } from '@/components/ui/sparkles-text'

export const metadata = {
  title: 'Breeze Mortgage Hub - Case Study',
  description: 'Transforming an incomplete product into a modern AI-enabled mortgage experience.',
}

export const sections = [
  { title: 'The Problem', id: 'the-problem' },
  { title: 'My Role', id: 'my-role' },
  { title: 'How I Created Clarity', id: 'how-i-created-clarity' },
  { title: 'Practical AI', id: 'where-ai-fit' },
  { title: 'What Shipped', id: 'what-shipped' },
  { title: 'Learnings', id: 'learnings' },
]

export default function BreezeMortgageHubCaseStudy() {
  const caseStudy = getCaseStudyBySlug('breeze-mortgage-hub')
  
  if (!caseStudy) {
    return <div>Case study not found</div>
  }

  const summary = {
    context: 'Early-stage fintech startup needed to design a mortgage platform from zero — no existing product, no design system, needed to prove the concept to investors.',
    constraints: [
      'Greenfield product in a complex regulatory domain (mortgage)',
      'Solo product designer supporting a CEO directly',
      'Needed investor-ready prototypes alongside dev-ready specs',
    ],
    decisions: [
      'Built a 95+ component design system with interaction rules and tokens from day one',
      'Identified 4 AI integration opportunities (document classification, smart form assist, conversational guidance)',
      'Designed 56 screens across 12 flows with acceptance criteria',
    ],
    impact: [
      'Compressed feature alignment from months of iteration loops to roughly a week per flow',
      'Helped secure $2.3M Series A funding',
    ],
  }

  // Results metrics - aligned to buyer outcomes
  const metrics = [
    {
      label: 'Design System Components',
      value: 95,
      suffix: '+',
      description: 'Components designed, documented, and annotated in Figma',
      highlight: true,
    },
    {
      label: 'Screens Designed',
      value: 56,
      description: 'Broken out into 12 distinct user flows.',
      highlight: true,
    },
    {
      label: 'Time to Feature Alignment',
      value: 1,
      suffix: ' week',
      description: 'Down from months of iteration cycles — prototypes turned feedback loops into decisions',
      highlight: true,
    }
  ]

  return (
    <CaseStudyViewer caseStudy={caseStudy} metrics={metrics} summary={summary}>
      
      {/* The Problem - 50/50 layout with icon cloud */}
      <SplitSection
        align="center"
        visual={<IntegrationIconCloud className="h-[380px] w-full" />}
      >
        <Heading id="the-problem" level={2} label="Challenge" className="mt-0">The Problem</Heading>
        <p>When I joined, the product was a mix of scattered wireframes, half-formed requirements, and a beta that looked and behaved like it had <em>missed a few years of the internet</em>. The value proposition wasn&apos;t landing, the flows didn&apos;t line up with user goals, and &quot;what happens next&quot; depended on who you asked that day.</p>
        <p>There was also an <strong>AI-shaped hole</strong> in the roadmap. Not &quot;add AI because it&apos;s 2025,&quot; but grounded opportunities for categorization, classification, and guidance that could <strong>remove friction</strong> from the most tedious parts of the mortgage application process. None of that was framed yet.</p>
      </SplitSection>

      {/* My Role - 50/50 layout with animated beam (flipped) */}
      <SplitSection
        flip
        align="center"
        visual={<AnimatedBeamDemo />}
      >
        <Heading id="my-role" level={2} label="Scope" className="mt-0">My Role</Heading>
        <p>I was brought in as an independent contractor supporting the CEO as a <strong>product designer</strong>. My job was to turn a loose vision into a coherent system the team could build. If you&apos;ve ever been the translator between <em>&quot;founder brain&quot;</em> and <em>&quot;what engineers actually need to build,&quot;</em> you know this is less about design and more about <strong>diplomacy</strong>.</p>
        <p>The work helped move Breeze from &quot;we have ideas&quot; to &quot;<strong>we have a product story</strong> investors can actually experience.&quot;</p>
        <p><strong>What I optimized for:</strong></p>
        <ul>
          <li>Clear <Tooltip containerClassName="inline" content="The structural design of how content and features are organized, labeled, and connected—think of it as the blueprint for where things live and how users find them."><span className="font-bold">information architecture</span></Tooltip> and navigation (so people stop getting lost)</li>
          <li>Consistent patterns and <Tooltip containerClassName="inline" content="Reusable UI building blocks (buttons, forms, cards) that behave the same way everywhere—reducing user confusion and speeding up development."><span className="font-bold">component behavior</span></Tooltip> (so the UI has "design DNA," not vibes)</li>
          <li>Requirements that are <Tooltip containerClassName="inline" content="Specifications detailed enough that engineers can build from them without guesswork—including edge cases, states, and expected behaviors."><span className="font-bold">dev-ready</span></Tooltip> (so shipping doesn't become an interpretive sport)</li>
        </ul>
      </SplitSection>

      {/* Quote Block */}
      <QuoteBlock className="mt-48 mb-4">
        Without time on our side, <SparklesText className="inline">Clarity</SparklesText> was the fastest way to buy runway.
      </QuoteBlock>

      {/* Before and After Comparison */}
      <AnimatedSafari className="mt-4 mb-16">
        <Safari url="breeze-mortgage-hub.com">
          <Compare
            firstImage="/images/case-studies/breeze-mortgage-hub/breezebefore.png"
            secondImage="/images/case-studies/breeze-mortgage-hub/breezeafter.png"
            firstImageClassName="object-contain object-center w-full h-full"
            secondImageClassname="object-contain object-center w-full h-full"
            className="w-full h-full"
            slideMode="drag"
            initialSliderPercentage={50}
          />
        </Safari>
      </AnimatedSafari>

      {/* How I Created Clarity */}
      <ProseSection>
        <ProseBlock>
          <Heading id="how-i-created-clarity" level={2} label="Before and After">How I Created Clarity</Heading>
          <p>I began with <strong>discovery</strong>, an audit of what existed, and <strong>competitive scanning</strong> across fintech and workflow-heavy tools. The goal wasn&apos;t to copy UI—it was to understand what <em>&quot;normal&quot;</em> looks like when complexity is handled well (spoiler: mortgage software <em>rarely</em> handles it well).</p>
          <p>I moved quickly into prototypes because we had a classic situation: about 60% of the product was understood, and the remaining 40% was <strong>fog</strong>. Prototyping turned that fog into <em>decisions</em>. It surfaced broken assumptions early, <Tooltip containerClassName="inline" content="Reducing uncertainty by testing ideas before building—cheaper to fix a prototype than production code."><span className="font-bold">de-risked</span></Tooltip> future flows, and forced the information architecture to reveal where it would bend or break.</p>
        </ProseBlock>

        <ProseBlock delay={0.1}>
          <p>From there, I designed a full system—not isolated screens:</p>
          <ul>
            <li>End-to-end critical paths (application → documents → review → payments)</li>
            <li><strong>Component patterns</strong> for form fields, validation, status, and <Tooltip containerClassName="inline" content="A UX technique that reveals information gradually as needed, preventing overwhelm by showing only what's relevant at each step."><span className="font-bold">progressive disclosure</span></Tooltip> (so the UI stays calm even when the process isn't)</li>
            <li><strong>Clickable prototypes</strong> with meaningful states and transitions (not &quot;<Tooltip containerClassName="inline" content="The demo version of reality where WiFi is always fast, users never misclick, and edge cases don't exist."><span className="font-bold">happy path theatre</span></Tooltip>&quot;)</li>
          </ul>
        </ProseBlock>
      </ProseSection>

      {/* Where AI Fit */}
      <ProseSection>
        <ProseBlock className="mb-8">
          <Heading id="where-ai-fit" level={2} label="AI Integration & Design">Practical AI</Heading>
          <p>I identified areas where AI could <strong>reduce grunt work</strong> without introducing risk. The goal was to assist with real end-user experiences—like predictive document classification, so humans can spend more time <em>confirming</em> instead of individually classifying bulk document uploads (T4/tax forms, income statements, proof of employment, etc.).</p>
        </ProseBlock>

        {/* Bento Grid showcasing AI features */}
        <FadeIn delay={0.15}>
          <div className="my-12">
            <AIFeaturesBento />
          </div>
        </FadeIn>
      </ProseSection>

      {/* What Shipped */}
      <ProseSection>
        <ProseBlock>
          <Heading id="what-shipped" level={2} label="Results">What Shipped</Heading>
          <p>This wasn&apos;t a single handoff file. (Those usually collect dust anyway.) It was a <strong>connected package</strong>:</p>
          <ul>
            <li>Interactive prototypes suitable for stakeholder and investor walkthroughs</li>
            <li>A componentized <Tooltip containerClassName="inline" content="A Figma library of reusable components—organized with design tokens (colors, fonts), interaction logic, and even bezier curves for consistent motion."><span className="font-bold">design system</span></Tooltip> foundation with interaction rules, states, and colour tokens.</li>
            <li><strong>UX artifacts</strong> (journeys, IA maps, decision notes) anchored to user outcomes</li>
            <li>Dev-friendly <Tooltip containerClassName="inline" content="Specific conditions a feature must meet to be considered 'done'—removes ambiguity about what success looks like before code is written."><span className="font-bold">acceptance criteria</span></Tooltip> and requirements for high-risk or ambiguous areas</li>
          </ul>
        </ProseBlock>

        {/* Image Gallery with lightbox */}
        <FadeIn delay={0.1}>
          <div className="my-12">
            <FocusImageGallery 
              images={[
                {
                  src: "/images/case-studies/breeze-mortgage-hub/breezedash.png",
                  alt: "Broker workflow dashboard",
                  caption: "Dashboard that turns pipeline status into action, filterable by stage in the application process."
                },
                {
                  src: "/images/case-studies/breeze-mortgage-hub/Lawyer-Submit.png",
                  alt: "Client portal with tabbed navigation",
                  caption: "Client portal showing the selected client's status in the application process. Tabbed information architecture offered a wide breadth of information. As designers, we should always try to let the complexity live in the UI, as opposed to our users' heads."
                },
                {
                  src: "/images/case-studies/breeze-mortgage-hub/Chat.png",
                  alt: "Modernized chat system",
                  caption: "A modernized chat system allowed brokers to strategize or escalate particularly troublesome clients."
                }
              ]}
            />
          </div>
        </FadeIn>
      </ProseSection>

      {/* Learnings */}
      <ProseSection className="mb-0">
        <ProseBlock className="mb-8">
          <Heading id="learnings" level={2} label="Takeaways">Learnings</Heading>
        </ProseBlock>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 my-8">
          <LearningCard 
            title="In early-stages: clarity beats velocity."
            icon="Eye"
            index={0}
          >
            Wireframes and prototypes discover where things bend or break. This prevents expensive mistakes later.
          </LearningCard>

          <LearningCard 
            title="Investors don't want a whitepaper."
            icon="Presentation"
            index={1}
          >
            They want to feel the product. Interactive prototypes compress explanation time. Less time arguing = more time refining the product. (Also, more time for them to find other things to argue about.)
          </LearningCard>

          <LearningCard 
            title="Mortgages are complex. Keep the user's experience simple."
            icon="Heart"
            index={2}
          >
            When the system requires complexity: hide it. Users don't need to understand how the sausage is made. They just need to trust the sausage. Progressive disclosure, clear status, and the right guidance keep <Tooltip containerClassName="inline" content="The mental effort required to use something—good design minimizes this by making interfaces intuitive and predictable."><span className="font-bold">cognitive load</span></Tooltip> low.
          </LearningCard>
        </div>
      </ProseSection>

      {/* Credits */}
      <FadeIn>
        <section className="mt-16 pt-8 border-t border-zinc-200 dark:border-zinc-700">
          <div className="prose prose-zinc dark:prose-invert max-w-none">
            <h3>Credits</h3>
            <p>The Breeze team, for keeping clarity on a lot of rotating ideas and trusting the process when the fog was thickest.</p>
          </div>
        </section>
      </FadeIn>
    </CaseStudyViewer>
  )
}
